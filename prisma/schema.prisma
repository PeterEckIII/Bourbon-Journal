datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id    String @id @default(cuid())
  email String @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  password Password?
  reviews  Review[]
}

model Password {
  hash String

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String @unique
}

model Review {
  id       String  @id @default(cuid())
  bottle   Bottle? @relation(fields: [bottleId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  bottleId String?
  date     String
  imageId  String?

  setting   String?
  glassware String?
  restTime  String?
  nose      String
  palate    String
  finish    String
  thoughts  String?

  baked       Int
  buttery     Int
  chocolate   Int
  toffee      Int
  corn        Int
  rye         Int
  wheat       Int
  malt        Int
  bakingSpice Int
  molasses    Int
  nutty       Int
  oaky        Int
  redFruit    Int
  darkFruit   Int
  berryFruit  Int
  citrusFruit Int
  stoneFruit  Int
  driedFruit  Int
  earthy      Int
  tobacco     Int
  leather     Int
  floral      Int
  herbaceous  Int

  overallRating Float
  value         Float

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String
}

model Bottle {
  id             String   @id @default(cuid())
  name           String
  type           String
  bottler        String?
  distiller      String?
  producer       String?
  country        String?
  region         String?
  price          Float
  age            String?
  year           String?
  batch          String?
  alcoholPercent String
  proof          String
  size           String?
  color          String
  finishing      String?
  reviews        Review[]
}
